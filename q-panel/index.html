<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<title>Q-Panel | ãƒ‘ãƒãƒ«é–‹æ”¾ã‚¯ã‚¤ã‚º</title>
<link rel="icon" type="image/jpeg" href="https://raw.githubusercontent.com/astro-root/quiz.pointshow/main/Q-Panel_icon.jpeg" sizes="32x32">
<link rel="shortcut icon" href="https://raw.githubusercontent.com/astro-root/quiz.pointshow/main/Q-Panel_icon.jpeg">
<link rel="apple-touch-icon" href="https://raw.githubusercontent.com/astro-root/quiz.pointshow/main/Q-Panel_icon.jpeg">
<meta property="og:type" content="website">
<meta property="og:title" content="Q-Panel | ãƒ‘ãƒãƒ«é–‹æ”¾ã‚¯ã‚¤ã‚º">
<meta property="og:description" content="ãƒ‘ãƒãƒ«ã‚’é–‹ã„ã¦å•é¡Œæ–‡ã®ä¸€éƒ¨ã‹ã‚‰ç­”ãˆã‚’æ¨æ¸¬ã™ã‚‹ã€1æ—¥5å•ã®ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã‚¯ã‚¤ã‚ºã€‚">
<meta property="og:url" content="https://astro-root.github.io/quiz.pointshow/q-panel.html">
<meta property="og:image" content="https://raw.githubusercontent.com/astro-root/quiz.pointshow/main/Q-Panel_logo_logo.png">
<meta property="og:image:alt" content="Q-Panel ãƒ­ã‚´">
<meta property="og:site_name" content="Q-Panel">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@astro_root">
<meta name="twitter:creator" content="@astro_root">
<meta name="twitter:title" content="Q-Panel | ãƒ‘ãƒãƒ«é–‹æ”¾ã‚¯ã‚¤ã‚º">
<meta name="twitter:description" content="ãƒ‘ãƒãƒ«ã‚’é–‹ã„ã¦å•é¡Œæ–‡ã®ä¸€éƒ¨ã‹ã‚‰ç­”ãˆã‚’æ¨æ¸¬ã™ã‚‹ã€1æ—¥5å•ã®ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã‚¯ã‚¤ã‚ºã€‚">
<meta name="twitter:image" content="https://raw.githubusercontent.com/astro-root/quiz.pointshow/main/Q-Panel_logo_logo.png">
<meta name="theme-color" content="#0f172a">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;700;800;900&family=Roboto+Mono:wght@500;700&display=swap" rel="stylesheet">
<style>
:root {
    --bg-grad-start: #0f172a;
    --bg-grad-end: #1e1b4b;
    --glass-surface: rgba(30, 41, 59, 0.6);
    --glass-border: rgba(255, 255, 255, 0.1);
    --text-main: #ffffff;
    --text-sub: #94a3b8;
    --accent-primary: #8b5cf6;
    --accent-secondary: #3b82f6;
    --accent-grad: linear-gradient(135deg, #a78bfa, #3b82f6);
    --danger: #ef4444;
    --panel-front: rgba(30, 41, 59, 0.95);
    --panel-back: linear-gradient(135deg, #4f46e5, #2563eb);
    --shadow-card: 0 8px 32px rgba(0, 0, 0, 0.3);
    --font-base: 'M PLUS Rounded 1c', sans-serif;
    --font-mono: 'Roboto Mono', monospace;
}
* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
body {
    margin: 0;
    background: linear-gradient(to bottom right, var(--bg-grad-start), var(--bg-grad-end));
    background-attachment: fixed;
    color: var(--text-main);
    font-family: var(--font-base);
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    overflow-x: hidden;
}
header {
    width: 100%;
    max-width: 640px;
    padding: 16px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: rgba(15, 23, 42, 0.85);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-bottom: 1px solid var(--glass-border);
    position: sticky;
    top: 0;
    z-index: 50;
}
.header-left { display: flex; gap: 10px; align-items: center; }
h1 { 
    margin: 0; 
    font-size: 1.4rem; 
    font-weight: 900; 
    letter-spacing: 0.05em; 
    background: var(--accent-grad);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}
.btn-icon {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid var(--glass-border);
    cursor: pointer; color: var(--text-main);
    width: 36px; height: 36px;
    border-radius: 10px; transition: all .2s;
    display: flex; justify-content: center; align-items: center;
}
.btn-icon:hover { background: var(--accent-primary); border-color: var(--accent-primary); }
.stats-container {
    width: 100%; max-width: 600px; padding: 24px 24px 12px;
    display: flex; justify-content: space-between; align-items: center;
}
.stat-box { display: flex; flex-direction: column; flex: 1; }
.stat-box.right { align-items: flex-end; flex: 0 0 auto; margin-left: 20px; }
.stat-label { 
    font-size: 0.7rem; font-weight: 800; color: var(--text-sub); 
    letter-spacing: 0.05em; margin-bottom: 6px; 
}
.progress-track {
    width: 100%; height: 10px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 5px;
    overflow: hidden;
    position: relative;
}
.progress-fill {
    height: 100%; width: 0%;
    background: var(--accent-grad);
    box-shadow: 0 0 10px rgba(139, 92, 246, 0.5);
    border-radius: 5px;
    transition: width 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
}
.life-hearts { 
    font-size: 1.2rem; letter-spacing: 2px; 
    filter: drop-shadow(0 0 8px rgba(239,68,68,0.4)); 
}
.game-area {
    width: 100%; max-width: 640px; flex: 1;
    display: flex; flex-direction: column; align-items: center;
    padding: 20px 16px 200px;
}
.grid-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(52px, 1fr));
    gap: 8px;
    width: 100%; max-width: 500px;
    margin-bottom: 50px;
    perspective: 1000px;
}
.panel-container {
    position: relative; aspect-ratio: 1;
    cursor: pointer; user-select: none;
    -webkit-tap-highlight-color: transparent;
}
.panel-flipper {
    position: relative; width: 100%; height: 100%;
    transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
    transform-style: preserve-3d;
    border-radius: 14px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.2);
}
.panel-container.flipped .panel-flipper { transform: rotateY(180deg); }
.panel-container.pop .panel-flipper { animation: popScale 0.4s ease-out; }
@keyframes popScale { 50% { transform: rotateY(180deg) scale(1.15); } }
.panel-face {
    position: absolute; width: 100%; height: 100%;
    -webkit-backface-visibility: hidden; backface-visibility: hidden;
    display: flex; justify-content: center; align-items: center;
    border-radius: 14px; font-weight: 800;
    border: 1px solid rgba(255,255,255,0.08);
}
.panel-front {
    background: var(--panel-front);
    color: var(--text-sub); font-size: 1.1rem;
    transition: all 0.2s;
}
.panel-container:hover .panel-front {
    border-color: var(--accent-primary); color: var(--accent-primary);
}
.panel-back {
    background: var(--panel-back); color: #fff;
    transform: rotateY(180deg); font-size: 1.5rem;
    text-shadow: 0 1px 2px rgba(0,0,0,0.3);
}
.panel-container.highlight .panel-back {
    background: linear-gradient(135deg, #f43f5e, #f59e0b);
    box-shadow: 0 0 15px rgba(244, 63, 94, 0.5);
}
.ref-links-area {
    width: 100%; display: grid; grid-template-columns: 1fr 1fr; gap: 12px;
    margin-top: auto;
}
.big-link-btn {
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    padding: 20px 10px;
    background: var(--glass-surface);
    border: 1px solid var(--glass-border);
    backdrop-filter: blur(4px);
    border-radius: 18px; text-decoration: none;
    transition: all 0.2s; height: 110px;
}
.big-link-btn:hover {
    transform: translateY(-4px); border-color: var(--accent-primary);
    background: rgba(30,41,59,0.8);
}
.link-icon {
    width: 38px; height: 38px;
    display: flex; justify-content: center; align-items: center;
    border-radius: 12px; background: rgba(139, 92, 246, 0.15);
    color: var(--accent-primary); margin-bottom: 10px;
}
.big-link-btn:hover .link-icon { background: var(--accent-grad); color: #fff; }
.link-label { font-size: 0.7rem; color: var(--text-sub); font-weight: 700; margin-bottom: 4px; }
.link-title { font-size: 0.95rem; color: var(--text-main); font-weight: 900; }
.input-dock {
    position: fixed; bottom: 0; left: 0; width: 100%;
    background: rgba(15, 23, 42, 0.9);
    backdrop-filter: blur(16px);
    padding: 15px 20px 40px;
    border-top: 1px solid var(--glass-border);
    z-index: 60; transition: transform 0.4s cubic-bezier(0.33, 1, 0.68, 1);
    box-shadow: 0 -10px 40px rgba(0,0,0,0.5);
}
.msg-area {
    text-align: center; height: 28px; margin-bottom: 8px;
    font-size: 0.9rem; font-weight: 800; color: var(--danger);
    opacity: 0; transform: translateY(10px); transition: 0.3s;
}
.msg-area.show { opacity: 1; transform: translateY(0); }
.input-group { display: flex; gap: 10px; max-width: 600px; margin: 0 auto; }
input[type="text"] {
    flex: 1; background: rgba(30, 41, 59, 0.8);
    border: 2px solid rgba(148, 163, 184, 0.2);
    border-radius: 14px; padding: 14px 18px;
    font-size: 1.1rem; font-weight: 700; color: white;
    outline: none; transition: 0.2s;
}
input[type="text"]:focus {
    background: #0f172a; border-color: var(--accent-secondary);
}
.btn-main {
    background: var(--text-main); color: #000;
    border: none; padding: 0 24px; border-radius: 14px;
    font-weight: 800; font-size: 1rem; cursor: pointer;
    transition: 0.2s;
}
.btn-main:hover {
    background: var(--accent-grad); color: white;
    box-shadow: 0 0 20px rgba(139, 92, 246, 0.5);
}
.input-group.locked {
    background: var(--glass-surface);
    border: 1px solid var(--glass-border);
    border-radius: 14px; padding: 0;
    overflow: hidden;
}
.result-toggle-btn {
    width: 100%; padding: 16px 20px;
    background: transparent; border: none;
    color: white; font-weight: 800; font-size: 1rem;
    display: flex; justify-content: space-between; align-items: center;
}
.modal-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0, 0, 0, 0.85);
    backdrop-filter: blur(8px);
    z-index: 100;
    display: none; justify-content: center; align-items: center;
    opacity: 0; transition: opacity 0.3s;
}
.modal-overlay.visible { opacity: 1; }
.modal-card {
    background: #1e293b; width: 90%; max-width: 420px;
    border-radius: 28px; padding: 36px 28px;
    text-align: center;
    box-shadow: 0 25px 60px -12px rgba(0, 0, 0, 0.6);
    border: 1px solid var(--glass-border);
    transform: scale(0.9); transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    position: relative; color: var(--text-main);
    background: linear-gradient(160deg, #1e293b, #0f172a);
}
.modal-overlay.visible .modal-card { transform: scale(1); }
.modal-close-x {
    position: absolute; top: 20px; right: 20px;
    background: rgba(255,255,255,0.05); border: none; width: 36px; height: 36px;
    border-radius: 50%; font-size: 1.5rem; cursor: pointer; color: var(--text-sub);
    display: flex; justify-content: center; align-items: center; line-height: 1;
}
.answer-reveal {
    font-size: 2.2rem; font-weight: 900; margin: 15px 0 25px;
    color: #fff; line-height: 1.4;
    padding: 15px; background: rgba(255,255,255,0.05); border-radius: 16px;
    border: 1px solid rgba(255,255,255,0.1);
}
.score-big {
    font-size: 4rem; font-weight: 900; 
    background: var(--accent-grad); -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    margin: 10px 0; font-family: var(--font-mono);
}
.btn-full {
    width: 100%; background: var(--accent-grad); color: #fff;
    padding: 16px; border-radius: 16px; border: none;
    font-weight: 800; font-size: 1.1rem; cursor: pointer; margin-top: 10px;
}
.btn-share-x {
    width: 100%; background: #000; color: #fff;
    padding: 16px; border-radius: 16px; border: 1px solid #333;
    font-weight: 800; font-size: 1rem; cursor: pointer; margin-top: 12px;
    display: flex; justify-content: center; align-items: center; gap: 8px;
}
.btn-sub {
    display: flex; justify-content: center; align-items: center;
    background: rgba(255,255,255,0.05);
    border: 1px solid var(--glass-border);
    color: var(--text-sub); text-decoration: none;
    padding: 12px; border-radius: 14px;
    font-weight: 700; font-size: 0.9rem;
    transition: all 0.2s; flex: 1;
}
.btn-sub:hover {
    background: rgba(255,255,255,0.1);
    color: var(--text-main); border-color: var(--accent-secondary);
}
.about-list {
    text-align: left; padding: 0 10px; margin-bottom: 30px;
    font-size: 0.9rem; line-height: 1.8; color: var(--text-sub);
    list-style: none; font-weight: 500;
}
.about-list li { margin-bottom: 12px; padding-left: 1.2em; text-indent: -1.2em; }
.about-list li::before { content: "ãƒ»"; font-weight: bold; color: var(--accent-secondary); margin-right: 4px; }
.footer-credit {
    margin-top: 30px; font-size: 0.8rem; color: var(--text-sub);
    display: flex; justify-content: center; align-items: center; gap: 8px;
}
.footer-credit a { color: var(--accent-secondary); text-decoration: none; font-weight: 700; }
.shake { animation: shake .4s both; }
@keyframes shake { 10%,90%{transform:translateX(-2px)} 20%,80%{transform:translateX(4px)} 30%,50%,70%{transform:translateX(-6px)} 40%,60%{transform:translateX(6px)} }
#confetti-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 90; }
#loading-indicator {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: var(--bg-grad-start);
    z-index: 200;
    display: flex; justify-content: center; align-items: center;
    color: var(--text-sub); font-weight: 800; font-size: 1.2rem;
    transition: opacity 0.5s;
}
.hidden-load { opacity: 0; pointer-events: none; }
</style>
</head>
<body>
<div id="loading-indicator">LOADING...</div>
<canvas id="confetti-canvas"></canvas>
<header>
    <div class="header-left">
        <button class="btn-icon" onclick="openRuleModal()" aria-label="ãƒ«ãƒ¼ãƒ«">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
        </button>
        <button class="btn-icon" onclick="openInfoModal()" aria-label="ã“ã®ã‚µã‚¤ãƒˆã«ã¤ã„ã¦">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>
        </button>
    </div>
    <h1>Q-Panel</h1>
    <div class="date-badge" id="dateDisplay" style="font-family:var(--font-mono); font-weight:700; font-size:0.8rem; color:var(--text-sub); background:rgba(0,0,0,0.3); padding:4px 10px; border-radius:6px; border:1px solid var(--glass-border);">--.--</div>
</header>
<div class="stats-container">
    <div class="stat-box">
        <div class="stat-label">DAILY PROGRESS <span id="progressCountText" style="margin-left:5px; font-family:var(--font-mono);">0 / 0</span></div>
        <div class="progress-track">
            <div class="progress-fill" id="dailyProgressBar"></div>
        </div>
    </div>
    <div class="stat-box" style="align-items: center; margin: 0 10px;">
        <div class="stat-label">SCORE</div>
        <div id="scoreDisplay" style="font-family:var(--font-mono); font-weight:700; font-size:1.1rem; color:var(--text-main);">0 / 0</div>
    </div>
    <div class="stat-box right">
        <div class="stat-label">LIFE</div>
        <div class="life-hearts" id="lifeDisplay">â¤ï¸â¤ï¸â¤ï¸</div>
    </div>
</div>
<div class="game-area" id="gameArea">
    <div class="grid-container" id="gridContainer"></div>
    <div class="ref-links-area">
        <a href="https://mondo.quizknock.com/" target="_blank" rel="noopener noreferrer" class="big-link-btn">
            <div class="link-icon">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2 2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
            </div>
            <div class="link-label">Inspired by</div>
            <div class="link-title">Mondo</div>
        </a>
        <a href="https://forms.gle/LNsRUWSRgkQoVemn8" target="_blank" rel="noopener noreferrer" class="big-link-btn">
            <div class="link-icon" style="background:rgba(239, 68, 68, 0.15); color:#ef4444;">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>
            </div>
            <div class="link-label">å•é¡Œã‚’æŠ•ç¨¿ã™ã‚‹</div>
            <div class="link-title">Submit Question</div>
        </a>
        <a href="https://forms.gle/d9KK7oNKpJfgurjf7" target="_blank" rel="noopener noreferrer" class="big-link-btn">
            <div class="link-icon" style="background:rgba(16, 185, 129, 0.15); color:#10b981;">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
            </div>
            <div class="link-label">ã”æ„è¦‹ãƒ»ã”æ„Ÿæƒ³</div>
            <div class="link-title">ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯</div>
        </a>
        <a href="https://astro-root.com" target="_blank" rel="noopener noreferrer" class="big-link-btn">
            <div class="link-icon" style="background:rgba(245, 158, 11, 0.15); color:#f59e0b;">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="20" x2="18" y2="10"></line><line x1="12" y1="20" x2="12" y2="4"></line><line x1="6" y1="20" x2="6" y2="14"></line></svg>
            </div>
            <div class="link-label">å…¬å¼ã‚µã‚¤ãƒˆ</div>
            <div class="link-title">ã‚‹ãƒ¼ã¨ã®ç ”ç©¶å®¤</div>
        </a>
    </div>
    <div class="footer-credit">
        Created by <a href="https://twitter.com/astro_root" target="_blank">@astro_root</a>
    </div>
</div>
<div class="input-dock" id="inputDock">
    <div class="msg-area" id="msgArea"></div>
    <div class="input-group" id="inputGroup">
        <input type="text" id="answerInput" placeholder="ã“ãŸãˆï¼ˆã²ã‚‰ãŒãªï¼‰" autocomplete="off" inputmode="kana">
        <button class="btn-main" id="submitBtn" onclick="handleAnswer()">è§£ç­”</button>
    </div>
</div>
<div class="modal-overlay" id="ruleModal">
    <div class="modal-card">
        <h2 style="margin:0 0 24px; font-weight:900;">HOW TO PLAY</h2>
        <ul class="about-list">
            <li>ãƒ‘ãƒãƒ«ã‚’ã‚¿ãƒƒãƒ—ã—ã¦é–‹ãã€ãƒ’ãƒ³ãƒˆã‹ã‚‰å•é¡Œã‚’æ¨æ¸¬ã—ã¦ãã ã•ã„ã€‚</li>
            <li>ç­”ãˆã¯ã€Œã²ã‚‰ãŒãªã€ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚</li>
            <li>æœªé–‹å°ã®ãƒ‘ãƒãƒ«æ•°ãŒã‚¹ã‚³ã‚¢ã«ãªã‚Šã¾ã™ã€‚ãƒ©ã‚¤ãƒ•ãŒãªããªã‚‹ã¨å¤±æ•—ã§ã™ã€‚</li>
            <li>1æ—¥5å•é™å®šã®ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã§ã™ã€‚æ¯æ—¥æœ5æ™‚ã«æ›´æ–°ã•ã‚Œã¾ã™ã€‚</li>
        </ul>
        <button class="btn-main" style="width:100%; height: 64px;" onclick="closeModal('ruleModal')">é–‰ã˜ã‚‹</button>
    </div>
</div>
<div class="modal-overlay" id="infoModal">
    <div class="modal-card">
        <h2 style="margin:0 0 20px; font-weight:900;">ABOUT</h2>
        <ul class="about-list">
            <li>ã“ã®ã‚µã‚¤ãƒˆã¯ã€QuizKnockã®ã€ŒMondo - æŒ‡å®šã‚ªãƒ¼ãƒ—ãƒ³ã‚¯ã‚¤ã‚ºã€ã‚’å‚è€ƒã«ä½œã‚‰ã‚ŒãŸã€éå–¶åˆ©ã®å€‹äººåˆ¶ä½œã‚µã‚¤ãƒˆã§ã™ã€‚</li>
            <li>å•é¡Œã¯ã€ç‹¬è‡ªã«ä½œæˆã—ãŸã‚‚ã®ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚</li>
            <li>äºˆå‘Šãªãã‚µã‚¤ãƒˆã®å…¬é–‹ã‚’çµ‚äº†ã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚</li>
        </ul>
        <div style="margin-bottom:24px; font-size:0.9rem; font-weight:700;">
            åˆ¶ä½œè€…: <a href="https://twitter.com/astro_root" target="_blank" style="color:var(--accent-secondary); text-decoration:none;">@astro_root</a>
        </div>
        <button class="btn-main" style="width:100%; height: 64px;" onclick="closeModal('infoModal')">é–‰ã˜ã‚‹</button>
    </div>
</div>
<div class="modal-overlay" id="resultModal">
    <div class="modal-card">
        <button class="modal-close-x" onclick="closeResultModal()">Ã—</button>
        <h2 id="resTitle" style="margin:0; font-size:2.5rem; font-weight:900;">CLEAR!</h2>
        <div id="resAnswerBox" class="answer-reveal"></div>
        <div style="font-size:0.8rem; font-weight:800; color:var(--text-sub); letter-spacing:0.1em; opacity:0.7;">SCORE</div>
        <div class="score-big" id="resScore">0 / 0</div>
        <button class="btn-full" id="nextBtn" onclick="nextQuestion()">æ¬¡ã®å•é¡Œã¸</button>
        <button class="btn-share-x" id="shareBtn">
            <svg width="18" height="18" viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z" fill="#fff"/></svg>
            Xã«ãƒã‚¹ãƒˆã™ã‚‹
        </button>
        <button class="btn-outline" id="copyBtn" style="margin-top:10px; width:100%; padding:12px; background:transparent; border:none; color:var(--text-sub); font-weight:700; cursor:pointer;">çµæœã‚’ã‚³ãƒ”ãƒ¼</button>
    </div>
</div>
<script>
const SHEET_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQQX96AovVcQCA8ALPpOcD2mO6DLmH3Tu_Dp0e1LlqBJ7Lijob0Q1gmiC7dDDzTPfsuX9icUR9Er_V4/pub?gid=2119319485&single=true&output=csv';
const DAILY_LIMIT=5;
const STORAGE_KEY_DATE='mondo_dark_date_reset';
const STORAGE_KEY_COUNT='mondo_dark_count_reset';
const STORAGE_KEY_Q_IDX='mondo_dark_idx_reset';
const STORAGE_KEY_CORRECT='mondo_dark_correct_reset';
const STORAGE_KEY_Q_STATE='mondo_dark_state_reset';
const SITE_URL='https://astro-root.github.io/quiz.pointshow/q-panel.html';
let state={question:null, opened:[], life:3, isOver:false, dailyCount:0, correctCount:0, lastResult:null};
let questionList=[];
const pulse=(ms=10)=>{if(navigator.vibrate)navigator.vibrate(ms)};
function fireConfetti(){
    const canvas=document.getElementById('confetti-canvas');
    const ctx=canvas.getContext('2d');
    canvas.width=window.innerWidth;
    canvas.height=window.innerHeight;
    let particles=[];
    const colors=['#8b5cf6','#3b82f6','#f43f5e','#10b981','#f59e0b'];
    for(let i=0;i<100;i++){
        particles.push({
            x:window.innerWidth/2, y:window.innerHeight/2,
            w:Math.random()*10+5, h:Math.random()*5+5,
            color:colors[Math.floor(Math.random()*colors.length)],
            vx:(Math.random()-0.5)*20, vy:(Math.random()-0.5)*20-5,
            grav:0.5, rot:Math.random()*360, rotSpeed:(Math.random()-0.5)*10
        });
    }
    function loop(){
        ctx.clearRect(0,0,canvas.width,canvas.height);
        let active=false;
        particles.forEach(p=>{
            p.x+=p.vx; p.y+=p.vy; p.vy+=p.grav; p.rot+=p.rotSpeed;
            if(p.y<canvas.height+20) active=true;
            ctx.save(); ctx.translate(p.x,p.y); ctx.rotate(p.rot*Math.PI/180);
            ctx.fillStyle=p.color; ctx.fillRect(-p.w/2,-p.h/2,p.w,p.h); ctx.restore();
        });
        if(active) requestAnimationFrame(loop);
    }
    loop();
}
function parseCSV(csv){
    const lines=csv.trim().split('\n');
    const list=[];
    lines.forEach(line=>{
        if(!line.trim())return;
        const parts=line.match(/(".*?"|[^",\s]+)(?=\s*,|\s*$)/g);
        if(parts&&parts.length>=3){
            const clean=parts.map(p=>p.replace(/^"|"$/g,'').trim());
            const answers=clean[1].split(/[\|ã€\/ãƒ»\sã€€]+/).map(s=>s.trim()).filter(Boolean);
            list.push({q:clean[0], a:answers, d:clean[2]});
        }
    });
    return list;
}
function getQuizDate(){
    const now=new Date();
    const shifted=new Date(now.getTime()-5*60*60*1000);
    return shifted.toLocaleDateString();
}
async function initGame(){
    try{
        if(!SHEET_URL.startsWith('http')){
            throw new Error('No Valid URL');
        }
        const cacheBustUrl = SHEET_URL + (SHEET_URL.includes('?') ? '&' : '?') + 't=' + new Date().getTime();
        const res = await fetch(cacheBustUrl);
        if(!res.ok) throw new Error('Fetch failed');
        const text = await res.text();
        questionList = parseCSV(text);
        
        const todayKey=getQuizDate();
        const savedDate=localStorage.getItem(STORAGE_KEY_DATE);
        if(savedDate!==todayKey){
            localStorage.setItem(STORAGE_KEY_DATE,todayKey);
            localStorage.setItem(STORAGE_KEY_COUNT,'0');
            localStorage.setItem(STORAGE_KEY_CORRECT,'0');
            localStorage.setItem(STORAGE_KEY_Q_STATE,'{}');
            state.dailyCount=0; state.correctCount=0;
        }else{
            state.dailyCount=parseInt(localStorage.getItem(STORAGE_KEY_COUNT)||'0');
            state.correctCount=parseInt(localStorage.getItem(STORAGE_KEY_CORRECT)||'0');
        }
        updateProgressUI();
        document.getElementById('loading-indicator').classList.add('hidden-load');
        if(state.dailyCount>=DAILY_LIMIT){
            showDailyComplete();
        }else{
            loadNextQuestion();
        }
    }catch(e){
        document.getElementById('loading-indicator').textContent = 'èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚URLã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚';
        console.error(e);
    }
}
function loadNextQuestion(){
    if(!questionList.length) return;
    let globalIdx=parseInt(localStorage.getItem(STORAGE_KEY_Q_IDX)||'0');
    const qIdx=globalIdx%questionList.length;
    state.question=questionList[qIdx];
    state.opened=[];
    state.life=3;
    state.isOver=false;
    state.lastResult=null;
    document.getElementById('resultModal').classList.remove('visible');
    setTimeout(()=>document.getElementById('resultModal').style.display='none',300);
    resetInputDock();
    document.getElementById('msgArea').textContent='';
    document.getElementById('msgArea').classList.remove('show');
    const qStateMap=JSON.parse(localStorage.getItem(STORAGE_KEY_Q_STATE)||'{}');
    const saved=qStateMap[qIdx];
    buildGridDOM();
    if(saved){
        state.opened=saved.opened||[];
        state.life=typeof saved.life==='number'?saved.life:3;
        state.isOver=saved.isOver;
        state.lastResult={
            isSuccess:saved.isSuccess,
            score:saved.score,
            qLen:saved.qLen,
            openedSnapshot:state.opened.slice(),
            life:state.life
        };
        state.opened.forEach(idx => {
            const p = document.getElementById(`panel-${idx}`);
            if(p) p.classList.add('flipped');
        });
        if(state.isOver){
            const qChars=Array.from(state.question.q);
            qChars.forEach((_, idx) => {
                const p = document.getElementById(`panel-${idx}`);
                if(p) p.classList.add('flipped');
            });
            if(state.lastResult.isSuccess){
               const panels=document.getElementsByClassName('panel-container');
               for(let p of panels) p.classList.add('highlight');
            }
            transformInputToLocked();
        }
    }
    renderStatus();
    document.getElementById('inputDock').style.transform='translateY(0)';
}
function buildGridDOM(){
    const grid=document.getElementById('gridContainer');
    grid.innerHTML='';
    const qChars=Array.from(state.question.q);
    qChars.forEach((char, i)=>{
        const container = document.createElement('div');
        container.className = 'panel-container';
        container.id = `panel-${i}`;
        const flipper = document.createElement('div');
        flipper.className = 'panel-flipper';
        const front = document.createElement('div');
        front.className = 'panel-face panel-front';
        front.textContent = i + 1;
        const back = document.createElement('div');
        back.className = 'panel-face panel-back';
        back.textContent = char;
        flipper.appendChild(front);
        flipper.appendChild(back);
        container.appendChild(flipper);
        container.onclick = () => openPanel(i);
        grid.appendChild(container);
    });
}
function openPanel(index){
    if(state.isOver || state.opened.includes(index)) return;
    state.opened.push(index);
    pulse(8);
    const p = document.getElementById(`panel-${index}`);
    if(p) p.classList.add('flipped');
    renderStatus();
    saveCurrentState();
}
function saveCurrentState(){
    const globalIdx=parseInt(localStorage.getItem(STORAGE_KEY_Q_IDX)||'0');
    const qIdx=globalIdx%questionList.length;
    const qStateMap=JSON.parse(localStorage.getItem(STORAGE_KEY_Q_STATE)||'{}');
    qStateMap[qIdx]={
        opened:state.opened,
        life:state.life,
        isOver:state.isOver,
        isSuccess: state.lastResult ? state.lastResult.isSuccess : false,
        score: state.lastResult ? state.lastResult.score : 0,
        qLen: Array.from(state.question.q).length
    };
    localStorage.setItem(STORAGE_KEY_Q_STATE, JSON.stringify(qStateMap));
}
function renderStatus(){
    const qLen=Array.from(state.question.q).length;
    const score=qLen-state.opened.length; 
    const redHeart='â¤ï¸'; const blackHeart='ğŸ–¤';
    let hearts=redHeart.repeat(Math.max(0,state.life))+blackHeart.repeat(Math.max(0,3-state.life));
    document.getElementById('lifeDisplay').textContent=hearts;
    if(document.getElementById('scoreDisplay')) document.getElementById('scoreDisplay').textContent = `${score} / ${qLen}`;
}
function resetInputDock(){
    const dockGroup=document.getElementById('inputGroup');
    dockGroup.className='input-group';
    dockGroup.innerHTML=`<input type="text" id="answerInput" placeholder="ã“ãŸãˆï¼ˆã²ã‚‰ãŒãªï¼‰" autocomplete="off" inputmode="kana"><button class="btn-main" id="submitBtn" onclick="handleAnswer()">è§£ç­”</button>`;
    const inputEl=document.getElementById('answerInput');
    inputEl.addEventListener('keypress',(e)=>{if(e.key==='Enter')handleAnswer()});
    if(!state.isOver) setTimeout(()=>inputEl.focus(), 100);
}
function transformInputToLocked(){
    const dockGroup=document.getElementById('inputGroup');
    dockGroup.className='input-group locked';
    const label = state.lastResult && state.lastResult.isSuccess ? 'CLEAR!' : 'FAILED';
    const color = state.lastResult && state.lastResult.isSuccess ? 'var(--accent-secondary)' : 'var(--danger)';
    dockGroup.innerHTML=`
        <button class="result-toggle-btn" onclick="openResultModal()">
            <div style="text-align:left; line-height:1.2;">
                <div style="font-size:0.8rem; opacity:0.8;">ã‚¿ãƒƒãƒ—ã—ã¦çµæœã‚’è¦‹ã‚‹</div>
                <div style="color:${color};">${label}</div>
            </div>
            <div>â–¶</div>
        </button>`;
}
function handleAnswer(){
    if(state.isOver)return;
    const input=document.getElementById('answerInput');
    const val=input.value.trim();
    const msg=document.getElementById('msgArea');
    const inputGroup=input.parentElement;
    if(!val)return;
    const correctAnswers=state.question.a;
    const isCorrect=correctAnswers.some(ans=>ans===val);
    if(isCorrect){
        gameClear(true);
    }else{
        state.life--;
        pulse(50);
        renderStatus();
        saveCurrentState();
        inputGroup.classList.remove('shake');
        void inputGroup.offsetWidth;
        inputGroup.classList.add('shake');
        if(state.life<=0){
            gameClear(false);
        }else{
            msg.innerHTML=`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg> ã¡ãŒã„ã¾ã™...`;
            msg.classList.add('show');
            input.value='';
            input.focus();
            setTimeout(()=>msg.classList.remove('show'),1500);
        }
    }
}
function gameClear(isSuccess){
    state.isOver=true;
    const qChars=Array.from(state.question.q);
    const qLen=qChars.length;
    const input=document.getElementById('answerInput');
    if(input) input.blur();
    let delayCount=0;
    for(let i=0; i<qLen; i++){
        const p = document.getElementById(`panel-${i}`);
        if(!state.opened.includes(i)){
            setTimeout(()=>{
                if(p) {
                    p.classList.add('flipped');
                    if(isSuccess) p.classList.add('pop');
                }
            }, delayCount*50);
            delayCount++;
        } else if(isSuccess){
            setTimeout(()=>{
                if(p) p.classList.add('highlight');
            }, delayCount*50 + i*20);
        }
    }
    if(isSuccess){
        setTimeout(()=>{
            const panels = document.getElementsByClassName('panel-container');
            for(let p of panels) p.classList.add('highlight');
        }, delayCount*50 + 200);
        state.correctCount=(parseInt(localStorage.getItem(STORAGE_KEY_CORRECT)||'0')||0)+1;
        localStorage.setItem(STORAGE_KEY_CORRECT,String(state.correctCount));
        pulse([80,50,80]);
        setTimeout(fireConfetti,400);
    }else{
        pulse(300);
    }
    const score = isSuccess ? (qLen - state.opened.length) : 0;
    state.lastResult={
        isSuccess:isSuccess,
        score:score,
        qLen:qLen,
        openedSnapshot:state.opened.slice(),
        life:state.life
    };
    saveCurrentState();
    setTimeout(()=>{
        openResultModal();
        transformInputToLocked();
    }, isSuccess ? 1500 : 1000);
}
function openResultModal(){
    if(!state.lastResult) return;
    const modal=document.getElementById('resultModal');
    modal.style.display='flex';
    void modal.offsetWidth;
    modal.classList.add('visible');
    document.getElementById('inputDock').style.transform='translateY(100%)';
    const r = state.lastResult;
    const tEl=document.getElementById('resTitle');
    const ansBox=document.getElementById('resAnswerBox');
    ansBox.textContent = "æ­£è§£: " + state.question.d;
    if(r.isSuccess){
        tEl.textContent="CLEAR!";
        tEl.style.backgroundImage="var(--accent-grad)";
        tEl.style.webkitBackgroundClip="text";
        tEl.style.webkitTextFillColor="transparent";
        tEl.style.color="transparent";
        ansBox.style.borderColor = "var(--accent-secondary)";
        ansBox.style.color = "#fff";
    }else{
        tEl.textContent="FAILED";
        tEl.style.backgroundImage="none";
        tEl.style.webkitTextFillColor="var(--danger)";
        tEl.style.color="var(--danger)";
        ansBox.style.borderColor = "var(--danger)";
        ansBox.style.color = "var(--danger)";
    }
    document.getElementById('resScore').textContent=`${r.score} / ${r.qLen}`;
    const shareBtn=document.getElementById('shareBtn');
    const copyBtn=document.getElementById('copyBtn');
    const redHeart='â¤ï¸'; const blackHeart='ğŸ–¤';
    const lifeEmoji=redHeart.repeat(r.life)+blackHeart.repeat(3-r.life);
    const openedSnapshot=r.openedSnapshot;
    const qChars=Array.from(state.question.q);
    const mappedEmojis=qChars.map((ch,idx)=>openedSnapshot.includes(idx)?'ğŸ’«':'ğŸ”’');
    let chunked='';
    for(let i=0;i<mappedEmojis.length;i+=10){chunked+=mappedEmojis.slice(i,i+10).join('')+'\n'}
    chunked=chunked.replace(/[\u0020\u00A0\u200B\uFEFF\uFE0F]+/gu,'');
    const shareText=`ğŸšª Q-Panel Daily\n\n${chunked.trim()}\n\nScore: ${r.score}/${r.qLen}\nLife: ${lifeEmoji}\n\n${SITE_URL}\n\n#ã‚¯ã‚¤ã‚ºQPanel`;
    shareBtn.onclick=()=>{
        const url=`https://twitter.com/intent/tweet?text=${encodeURIComponent(shareText)}`;
        window.open(url,'_blank');
    };
    copyBtn.onclick=async()=>{
        try{
            await navigator.clipboard.writeText(shareText);
            copyBtn.textContent = "ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼";
            setTimeout(()=>copyBtn.textContent="çµæœã‚’ã‚³ãƒ”ãƒ¼", 2000);
        }catch(e){alert('ã‚³ãƒ”ãƒ¼ã§ãã¾ã›ã‚“ã§ã—ãŸ');}
    };
    const btn=document.getElementById('nextBtn');
    if(state.dailyCount + 1 >= DAILY_LIMIT){
        btn.textContent="æœ¬æ—¥ã®çµæœã‚’è¦‹ã‚‹";
        btn.onclick=()=>{
            if(state.dailyCount < DAILY_LIMIT) {
                state.dailyCount++;
                localStorage.setItem(STORAGE_KEY_COUNT, state.dailyCount);
            }
            closeResultModal();
            setTimeout(showDailyComplete,400);
        };
    }else{
        btn.textContent="æ¬¡ã®å•é¡Œã¸";
        btn.onclick=nextQuestion;
    }
}
function closeResultModal(){
    const modal=document.getElementById('resultModal');
    modal.classList.remove('visible');
    setTimeout(()=>{
        modal.style.display='none';
        document.getElementById('inputDock').style.transform='translateY(0)';
    },300);
}
function nextQuestion(){
    if(state.dailyCount<DAILY_LIMIT){
        state.dailyCount++;
        localStorage.setItem(STORAGE_KEY_COUNT,state.dailyCount);
        let globalIdx=parseInt(localStorage.getItem(STORAGE_KEY_Q_IDX)||'0');
        localStorage.setItem(STORAGE_KEY_Q_IDX,globalIdx+1);
        updateProgressUI();
    }
    closeResultModal();
    setTimeout(loadNextQuestion, 400);
}
function showDailyComplete(){
    const area=document.getElementById('gameArea');
    const shareText=`ğŸ† Q-Panel Daily Complete!\n\n${state.correctCount} / ${DAILY_LIMIT} æ­£è§£ã—ã¾ã—ãŸï¼\n\n${SITE_URL}\n\n#ã‚¯ã‚¤ã‚ºQPanel`;
    document.getElementById('inputDock').style.display='none';
    if(document.getElementById('scoreDisplay')) document.getElementById('scoreDisplay').textContent="DONE";
    area.innerHTML=`
    <div style="width:100%; max-width:600px; padding:40px 20px; background:var(--glass-surface); backdrop-filter:blur(10px); border-radius:30px; box-shadow:var(--shadow-card); animation:popScale 0.5s; color:var(--text-main); border:1px solid var(--glass-border); text-align:center;">
        <div style="font-size:5rem; margin-bottom:20px; filter:drop-shadow(0 0 20px rgba(255,255,255,0.3));">ğŸ‰</div>
        <h2 style="margin:0; font-size:2rem; font-weight:900;">COMPLETE!</h2>
        <p style="color:var(--text-sub); font-weight:700;">æœ¬æ—¥ã®ãƒãƒ£ãƒ¬ãƒ³ã‚¸çµ‚äº†ã§ã™</p>
        <div style="font-size:4rem; font-weight:900; background:var(--accent-grad); -webkit-background-clip:text; -webkit-text-fill-color:transparent; font-family:var(--font-mono); margin:20px 0; filter:drop-shadow(0 0 20px rgba(139, 92, 246, 0.4));">
            ${state.correctCount} / ${DAILY_LIMIT}
        </div>
        <button class="btn-share-x" onclick="window.open('https://twitter.com/intent/tweet?text=${encodeURIComponent(shareText)}', '_blank')" style="max-width:300px; margin:0 auto 12px;">
            <svg width="18" height="18" viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z" fill="#fff"/></svg>
            çµæœã‚’ã‚·ã‚§ã‚¢ã™ã‚‹
        </button>
        <button id="dailyCopyBtn" style="display:block; max-width:300px; margin:0 auto 30px; width:100%; padding:12px; background:transparent; border:none; color:var(--text-sub); font-weight:700; cursor:pointer;">çµæœã‚’ã‚³ãƒ”ãƒ¼</button>
        <div class="ref-links-area">
            <a href="https://mondo.quizknock.com/" target="_blank" rel="noopener noreferrer" class="big-link-btn">
                <div class="link-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2 2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
                </div>
                <div class="link-label">Inspired by</div>
                <div class="link-title">Mondo</div>
            </a>
            <a href="https://forms.gle/LNsRUWSRgkQoVemn8" target="_blank" rel="noopener noreferrer" class="big-link-btn">
                <div class="link-icon" style="background:rgba(239, 68, 68, 0.15); color:#ef4444;">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>
                </div>
                <div class="link-label">å•é¡Œã‚’æŠ•ç¨¿ã™ã‚‹</div>
                <div class="link-title">Submit Question</div>
            </a>
            <a href="https://forms.gle/d9KK7oNKpJfgurjf7" target="_blank" rel="noopener noreferrer" class="big-link-btn">
                <div class="link-icon" style="background:rgba(16, 185, 129, 0.15); color:#10b981;">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
                </div>
                <div class="link-label">ã”æ„è¦‹ãƒ»ã”æ„Ÿæƒ³</div>
                <div class="link-title">ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯</div>
            </a>
            <a href="https://astro-root.github.io/quiz.pointshow/" target="_blank" rel="noopener noreferrer" class="big-link-btn">
                <div class="link-icon" style="background:rgba(245, 158, 11, 0.15); color:#f59e0b;">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="20" x2="18" y2="10"></line><line x1="12" y1="20" x2="12" y2="4"></line><line x1="6" y1="20" x2="6" y2="14"></line></svg>
                </div>
                <div class="link-label">å¾—ç‚¹è¡¨ç¤ºã‚µã‚¤ãƒˆ</div>
                <div class="link-title">Q-Score</div>
            </a>
        </div>
        <div class="footer-credit" style="justify-content:center; margin-top:40px;">
             Created by <a href="https://twitter.com/astro_root" target="_blank">@astro_root</a>
        </div>
    </div>`;
    document.getElementById('dailyCopyBtn').onclick=async function(){
        try{
            await navigator.clipboard.writeText(shareText);
            this.textContent = "ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼";
            setTimeout(()=>this.textContent="çµæœã‚’ã‚³ãƒ”ãƒ¼", 2000);
        }catch(e){alert('ã‚³ãƒ”ãƒ¼ã§ãã¾ã›ã‚“ã§ã—ãŸ');}
    };
    fireConfetti();
}
function updateProgressUI(){
    document.getElementById('dateDisplay').textContent=getQuizDate().replace(/\//g,'.');
    const currentQ = Math.min(state.dailyCount + 1, DAILY_LIMIT);
    document.getElementById('progressCountText').textContent = `${currentQ} / ${DAILY_LIMIT}`;
    const pct = Math.min(state.dailyCount, DAILY_LIMIT) / DAILY_LIMIT * 100;
    document.getElementById('dailyProgressBar').style.width = `${pct}%`;
}
function openRuleModal(){
    const m=document.getElementById('ruleModal');
    m.style.display='flex';
    void m.offsetWidth; m.classList.add('visible');
}
function openInfoModal(){
    const m=document.getElementById('infoModal');
    m.style.display='flex';
    void m.offsetWidth; m.classList.add('visible');
}
function closeModal(id){
    const m=document.getElementById(id);
    m.classList.remove('visible');
    setTimeout(()=>m.style.display='none',300);
}
initGame();
</script>
</body>
</html>
